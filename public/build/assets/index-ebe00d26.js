import{C as P,d as M}from"./chart-c38e3f54.js";import{x as O,W as C,X as w,Y as S,d as q,j as K,_ as R,H as U,$ as b,a0 as D}from"./app-470e78aa.js";const B={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},$={type:{type:String,required:!0},...B},A=S[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function i(t){return D(t)?b(t):t}function H(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return D(e)?new Proxy(t,{}):t}function T(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function j(t,e){t.labels=e}function I(t,e,a){const r=[];t.datasets=e.map(s=>{const n=t.datasets.find(l=>l[a]===s[a]);return!n||!s.data||r.includes(n)?{...s}:(r.push(n),Object.assign(n,s),n)})}function W(t,e){const a={labels:[],datasets:[]};return j(a,t.labels),I(a,t.datasets,e),a}const X=O({props:$,setup(t,e){let{expose:a}=e;const r=q(null),s=C(null);a({chart:s});const n=()=>{if(!r.value)return;const{type:o,data:f,options:y,plugins:p,datasetIdKey:x}=t,g=W(f,x),u=H(g,f);s.value=new P(r.value,{type:o,data:u,options:{...y},plugins:p})},l=()=>{const o=b(s.value);o&&(o.destroy(),s.value=null)},d=o=>{o.update(t.updateMode)};return K(n),R(l),U([()=>t.options,()=>t.data],(o,f)=>{let[y,p]=o,[x,g]=f;const u=b(s.value);if(!u)return;let v=!1;if(y){const c=i(y),h=i(x);c&&c!==h&&(T(u,c),v=!0)}if(p){const c=i(p.labels),h=i(g.labels),m=i(p.datasets),L=i(g.datasets);c!==h&&(j(u.config.data,c),v=!0),m&&m!==L&&(I(u.config.data,m,t.datasetIdKey),v=!0)}v&&d(u)},{deep:!0}),()=>w("canvas",{ref:r})}});function Y(t,e){return P.register(e),O({props:B,setup(a,r){let{expose:s}=r;const n=C(null),l=d=>{n.value=d==null?void 0:d.chart};return s({chart:n}),()=>w(X,A({ref:l},{type:t,...a}))}})}const z=Y("bar",M);export{z as B};
